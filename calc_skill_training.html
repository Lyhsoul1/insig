<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Treino de Skill</title>
  <style>
    body {
      background: #0d1117;
      color: #f0f0f0;
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 40px auto;
      padding: 20px;
    }
    h1 {
      color: #58a6ff;
      text-align: center;
    }
    label {
      margin-top: 15px;
      display: block;
      font-size: 16px;
    }
    select, input[type="number"], input[type="checkbox"] {
      width: 100%;
      padding: 8px;
      font-size: 16px;
      margin-top: 5px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #238636;
      color: white;
      border: none;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
    }
    .result {
      margin-top: 30px;
      padding: 15px;
      background: #161b22;
      border-radius: 8px;
    }
  </style>
</head>
<body>

<h1>Calculadora de Treino de Skill</h1>

<label>Vocação:</label>
<select id="vocation">
  <option value="knight">Knight</option>
  <option value="paladin">Paladin</option>
  <option value="sorcerer">Sorcerer</option>
  <option value="druid">Druid</option>
  <option value="monk">Monk</option>
</select>

<label>Tipo de Skill:</label>
<select id="skillType">
  <option value="magic">Magic</option>
  <option value="melee">Axe/Club/Sword</option>
  <option value="distance">Distance</option>
  <option value="fist">Fist</option>
  <option value="shield">Shield</option>
</select>

<label>Skill Atual:</label>
<input type="number" id="currentSkill" value="80" min="1" max="130">

<label>Skill Desejado:</label>
<input type="number" id="targetSkill" value="85" min="2" max="130">

<label>Loyalty Bonus (%):</label>
<select id="loyalty">
  <option value="0">0%</option>
  <option value="5">5%</option>
  <option value="10">10%</option>
  <option value="15">15%</option>
  <option value="20">20%</option>
  <option value="25">25%</option>
  <option value="30">30%</option>
  <option value="35">35%</option>
  <option value="40">40%</option>
  <option value="45">45%</option>
  <option value="50">50%</option>
</select>

<label><input type="checkbox" id="dummy"> Exercício com Dummy (Offline)</label>
<label><input type="checkbox" id="double"> Double Skill Event</label>

<button onclick="calculate()">Calcular</button>

<div class="result" id="result">Resultado aparecerá aqui.</div>

<script>
function skillXP(level) {
  return 50 * Math.pow(level - 10, 2);
}

function calculate() {
  const current = parseInt(document.getElementById('currentSkill').value);
  const target = parseInt(document.getElementById('targetSkill').value);
  const loyalty = parseInt(document.getElementById('loyalty').value);
  const dummy = document.getElementById('dummy').checked;
  const doubleSkill = document.getElementById('double').checked;
  const skillType = document.getElementById('skillType').value;

  if (target <= current) {
    document.getElementById('result').innerText = 'Skill alvo deve ser maior que skill atual.';
    return;
  }

  let totalXP = 0;
  for (let i = current; i < target; i++) {
    totalXP += skillXP(i);
  }

  let baseGain = 14400; // duração de uma lasting weapon em segundos
  let xpPerSecond = 1;

  if (skillType === 'magic') xpPerSecond = 1.1;
  else if (skillType === 'shield') xpPerSecond = 0.5;
  else xpPerSecond = 0.9;

  if (dummy) xpPerSecond *= 0.5; // dummy = metade
  if (doubleSkill) xpPerSecond *= 2;

  xpPerSecond *= (1 + (loyalty / 100));

  const xpPerWeapon = baseGain * xpPerSecond;
  const weaponsNeeded = Math.ceil(totalXP / xpPerWeapon);
  const totalSeconds = weaponsNeeded * 8 * 3600;

  const hours = Math.floor(totalSeconds / 3600);
  const minutes = Math.floor((totalSeconds % 3600) / 60);

  document.getElementById('result').innerText =
    `Vocação: ${document.getElementById('vocation').value.charAt(0).toUpperCase() + document.getElementById('vocation').value.slice(1)}\n` +
    `Tipo de Skill: ${skillType}\n` +
    `Skill Atual: ${current}\n` +
    `Skill Desejado: ${target}\n` +
    `XP necessário: ${totalXP.toLocaleString()}\n` +
    `Armas Necessárias: ${weaponsNeeded}\n` +
    `Tempo Estimado: ${hours}h ${minutes}m`;
}
</script>

</body>
</html>
